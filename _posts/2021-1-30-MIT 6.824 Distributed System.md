---

layout:     post
title:      "MIT 6.824 分布式系统笔记"
subtitle:   "MIT 6.824 Distributed System"
date:       2021-01-31 19:43:00
author:     "Jpy"
header-img: "img/post-bg-2015.jpg"
tags:
    - Study
    - Distributed System
---
# 目录 Directory

- [1. Introduction](#1)
  - [Lab 环境配置](#Lab_set)
  - [Lab1 Mapreduce](#Lab1)
- [2. RPC and Threads](#2)
- [3. GFS](#3)
- [4. Primary-Backup Replication](#4)
- [5. Go Threads and Raft](#5)
- [6. Fault Tolerance Raft](#6)
- [7. Fault Tolerance Rft](#7)
- [8. Zookeeper](#8)
- [9. More Replication CRAQ](#9)
- [10. Cloud Replicated DB Aurora](#10)



<h1 id="1"><font face="Microsoft Yahei Light">1. Introduction</font></h1>

## Importance

性能 容错 物理空间上的距离 代码安全

## Challenges

- concurrency 并发性
- partial failure 局部错误
- performance 性能

## Lab

1. Mapreduce
2. Raft
3. K/V server (key/value)
4. sharded key value service

## Infrastructure

- Storage
- Communications
- Compution

## Performance

Scalability 可扩展性：两倍的计算机-->两倍的算力

## Fault Tolerance

错误总是存在的，特别是在大的分布式集群中  

1. avaliability 可用性
2. recoverability 可修复性

NV storage 非易失性存储 比如SSD 闪存  

Replication 复制

## Consistency

Pot(k,v)  get(k)--->v  

将不同数据存放在尽可能远的地方，这样两个副本中能存活一个的可能性将大大提高

## Mapreduce

让普通用户能够使用mapreduce，但不用知道其底层的知识  


[![yeH3F0.md.png](https://s3.ax1x.com/2021/02/01/yeH3F0.md.png)](https://imgchr.com/i/yeH3F0)

基本上Input到Map的过程都是在本地的，存储数据时，会将数据分散存储在不同的Server上，然后在运行Mapreduce时，在本地进行Map，然后通过网络传输数据，再进行Reduce。  
>在2004年制约mapreduce的主要原因是网络传输的问题

<h2 id="Lab_set"><font face="Microsoft Yahei Light">Lab环境配置</font></h2>

我的环境：

Win10 x64

因为lab都需要的是linux系统，所以需要在windows上安装subsystem，可以根据lab上的链接下载安装

>Windows
>
>The labs probably won't work directly on Windows. If you're feeling adventurous, you can try to get them running inside [Windows Subsystem for Linux](https://docs.microsoft.com/en-us/windows/wsl/install-win10) and following the Linux instructions above. Otherwise, you can fall back to Athena.

*这里的网页拉到底部可以切换中文，更方便一些*

其中的在**Microsoft Store中安装Ubuntu**，我却点击了安装总也没反应，语言地区也修改到了美国，还是没有用。

此时发现在Microsoft的官方文档中有解答。

[手动下载适用于 Linux 的 Windows 子系统发行版包](https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#installing-your-distro)

为了方便大家，我将下载链接放在下方，建议用迅雷下载，速度更快。**但手动下载的安装包需要注意默认的是安装在第二个盘符，需要手动移动至系统盘**，详见**[遇到的问题]**。

[Ubuntu 20.04](https://wsldownload.azureedge.net/Ubuntu_2004.2020.424.0_x64.appx)

### 遇到的问题
---

* WslRegisterDistribution failed with error: 0x80071772

解决方法：出现此错误的原因，win10商店里的WSL安装默认安装目录都会放到第二个盘符，但是由于win10不知道出于什么原因，不是安装在C盘的appx应用都会出现问题，因此我们只需要将WSL移动到C盘就行。**具体方法就是 设置->应用->应用和功能->找到你需要移动的appx应用，单击之后会出现一个移动选项，再将应用移动到C盘就行。**

> https://www.cnblogs.com/slientbrain/p/13256357.html

* windows10 ubuntu子系统 WSL文件的位置在哪里

直接在资源管理器的路径里输入`\\wsl$`就可以访问到了。实际的路径为`C:\Users\Administrator\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\LocalState`

> https://www.cnblogs.com/lepeCoder/p/wsl_dir.html

* "gcc" : executable file not found in $Path

Ubuntu中使用apt来安装gcc

```
sudo apt install build-essential
```

验证

```
gcc --version
```

> https://www.php.cn/linux-432812.html

<h2 id="Lab1"><font face="Microsoft Yahei Light">Lab1 Mapreduce</font></h2>

参考论文：[Mapreduce](http://nil.csail.mit.edu/6.824/2020/papers/mapreduce.pdf)




<h1 id="2"><font face="Microsoft Yahei Light">2. RPC and Threads</font></h1>


<h1 id="3"><font face="Microsoft Yahei Light">3. GFS</font></h1>

<h1 id="4"><font face="Microsoft Yahei Light">4. Primary-Backup Replication</font></h1>

<h1 id="5"><font face="Microsoft Yahei Light">5. Go Threads and Raft</font></h1>

<h1 id="6"><font face="Microsoft Yahei Light">6. Fault Tolerance Raft</font></h1>

<h1 id="7"><font face="Microsoft Yahei Light">7. Fault Tolerance Rft</font></h1>

<h1 id="8"><font face="Microsoft Yahei Light">8. Zookeeper</font></h1>

<h1 id="9"><font face="Microsoft Yahei Light">9. More Replication CRAQ</font></h1>

<h1 id="10"><font face="Microsoft Yahei Light">10. Cloud Replicated DB Aurora</font></h1>


