---

layout:     post
title:      "Jeckyllå°å·¥å…·é…ç½®"
date:       2021-02-15 23:26:00
author:     "Jpy"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - Jeckyll
    - CS
---



## Jeckyllç›®å½•å¯¼èˆªæ /ä¾§è¾¹ç›®å½•

å› ä¸ºæˆ‘ç”¨çš„æ˜¯Huxproçš„åˆå§‹æ¨¡ç‰ˆï¼Œå†è‡ªå·±ä¿®æ”¹ã€‚çœ‹äº†Huxproä¸Šçš„catalogçš„æ•ˆæœå¾ˆå¥½ï¼Œä½†ä¹Ÿæ²¡æœ‰è¯´æ˜æ€ä¹ˆä»åˆå§‹æ¨¡ç‰ˆä¸­å»é…ç½®è¯¥catalogã€‚ç»è¿‡æ–­æ–­ç»­ç»­ä¸¤å¤©æ—¶é—´çš„æ‘¸ç´¢ï¼Œç»ˆäºææ¸…æ¥šäº†è¿‡ç¨‹ã€‚

1. åœ¨`footer.html`ä¸­æ·»åŠ `Side Catalog`ä»£ç 

```html
{% unless page.no-catalog %}
<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('{{ page.multilingual }}') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("{{ '/js/jquery.nav.js' | prepend: site.baseurl }}", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>
{% endunless %}
```

2. åœ¨`post.html`ä¸­æ·»åŠ ä»£ç æ¸²æŸ“Catalogï¼Œæ”¾åœ¨class="row"çš„divå†…ï¼Œä¸`Post Container`çš„divå¹¶åˆ—ã€‚

```html
<!-- Side Catalog Container -->
            {% unless page.no-catalog %}
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            {% endunless %}
```

3. ä¿®æ”¹`hux-blog.css`åŠ`hux-blog.min.css`

```css
/*hux-blog.css*/
.catalog-container {
  padding: 0px;
}
.side-catalog {
  display: block;
  overflow: auto;
  height: 100%;
  padding-bottom: 40px;
  width: 195px;
}
.side-catalog.fixed {
  position: fixed;
  top: -21px;
}
.side-catalog.fold .catalog-toggle::before {
  content: "+";
}
.side-catalog.fold .catalog-body {
  display: none;
}
.side-catalog .catalog-toggle::before {
  content: "âˆ’";
  position: relative;
  margin-right: 5px;
  bottom: 1px;
}
.side-catalog .catalog-body {
  position: relative;
  list-style: none;
  height: auto;
  overflow: hidden;
  padding-left: 0px;
  padding-right: 5px;
  text-indent: 0;
}
.side-catalog .catalog-body li {
  position: relative;
  list-style: none;
}
.side-catalog .catalog-body li a {
  padding-left: 10px;
  max-width: 180px;
  display: inline-block;
  vertical-align: middle;
  height: 30px;
  line-height: 30px;
  overflow: hidden;
  text-decoration: none;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.side-catalog .catalog-body .h1_nav,
.side-catalog .catalog-body .h2_nav {
  margin-left: 0;
  font-size: 13px;
  font-weight: bold;
}
.side-catalog .catalog-body .h3_nav {
  margin-left: 6px;
  font-size: 13px;
  font-weight: bold;
}
.side-catalog .catalog-body .h4_nav {
  margin-left: 12px;
  font-size: 12px;
}
.side-catalog .catalog-body .h4_nav a {
  max-width: 170px;
}
.side-catalog .catalog-body .h5_nav .h6_nav {
  margin-left: 18px;
  font-size: 12px;
}
.side-catalog .catalog-body .h5_nav .h6_nav a {
  max-width: 170px;
}
.side-catalog .catalog-body .active {
  border-radius: 4px;
  background-color: #f5f5f5;
}
.side-catalog .catalog-body .active a {
  color: #0085a1 !important;
}
@media (max-width: 1200px) {
  .side-catalog {
    display: none;
  }
}
```

```css
/*ä»¥ä¸‹ä»£ç æ’å…¥hux-blog.min.css*/
.catalog-container{padding:0}.side-catalog{display:block;overflow:auto;height:100%;padding-bottom:40px;width:195px}.side-catalog.fixed{position:fixed;top:-21px}.side-catalog.fold .catalog-toggle::before{content:"+"}.side-catalog.fold .catalog-body{display:none}.side-catalog .catalog-toggle::before{content:"âˆ’";position:relative;margin-right:5px;bottom:1px}.side-catalog .catalog-body{position:relative;list-style:none;height:auto;overflow:hidden;padding-left:0;padding-right:5px;text-indent:0}.side-catalog .catalog-body li{position:relative;list-style:none}.side-catalog .catalog-body li a{padding-left:10px;max-width:180px;display:inline-block;vertical-align:middle;height:30px;line-height:30px;overflow:hidden;text-decoration:none;white-space:nowrap;text-overflow:ellipsis}.side-catalog .catalog-body .h1_nav,.side-catalog .catalog-body .h2_nav{margin-left:0;font-size:13px;font-weight:700}.side-catalog .catalog-body .h3_nav{margin-left:6px;font-size:13px;font-weight:700}.side-catalog .catalog-body .h4_nav{margin-left:12px;font-size:12px}.side-catalog .catalog-body .h4_nav a{max-width:170px}.side-catalog .catalog-body .h5_nav .h6_nav{margin-left:18px;font-size:12px}.side-catalog .catalog-body .h5_nav .h6_nav a{max-width:170px}.side-catalog .catalog-body .active{border-radius:4px;background-color:#f5f5f5}.side-catalog .catalog-body .active a{color:#0085a1!important}@media (max-width:1200px){.side-catalog{display:none}}
```

4. åœ¨`js`æ–‡ä»¶å¤¹ä¸‹æ’å…¥`jquery.nav.js`ï¼Œå¯ä»¥ç›´æ¥ä»huxçš„æ–‡ä»¶ä¸­å¤åˆ¶è¿‡å»ã€‚
5. å¤åˆ¶`side-catalog.less`åˆ°`less`æ–‡ä»¶å¤¹ä¸‹
6. ä¿®æ”¹`hux-blog.min.jsä¸hux-blog.js`ï¼Œç›´æ¥ä»huxproå¤åˆ¶åˆ°è‡ªå·±çš„`js`ç›®å½•ä¸‹å³å¯ã€‚

## åšå®¢BackToTopæŒ‰é’®
å‚è€ƒé“¾æ¥ï¼š[Jekyll åšå®¢æ·»åŠ å›åˆ°é¡¶éƒ¨æŒ‰é’®](https://sunete.github.io/website/jekyll-add-back-to-top-button/#site-nav)
è¿™ä¸ªæ–¹æ³•å¯¹äºæˆ‘è¿™ç§æ‡’å¾—å»ææ‡‚jeckyllç»“æ„çš„äººæ¥è¯´å¤ªå‹å¥½äº†
å°†ä¸‹é¢çš„ä»£ç æ”¾ç½®åˆ°åšå®¢æ–‡ç« çš„htmlä¸­ï¼Œåœ¨jeckyllä¸­æ˜¯`post.html`

```html
<div id="backtop">
   <a href="#">TOP</a>
</div> 
```

å†å¼•å…¥cssï¼Œæœ€å‚»ç“œçš„åŠæ³•å°±è¿˜æ˜¯æ·»åŠ åœ¨è¯¥htmlæ–‡ä»¶ä¸­

```html
<style type="text/css">
    #backtop a { /* back to top button */
        text-align: center;
        line-height: 50px;
        font-size: 16px;
        width:50px;
        height: 50px;
        position: fixed;
        bottom: 10px; /* å°æŒ‰é’®åˆ°æµè§ˆå™¨åº•è¾¹çš„è·ç¦» */
        right: 60px; /* å°æŒ‰é’®åˆ°æµè§ˆå™¨å³è¾¹æ¡†çš„è·ç¦» */
        color: rgb(64,120,192); /* å°æŒ‰é’®ä¸­æ–‡å­—çš„é¢œè‰² */
        z-index: 1000;
        background: #fff; /* å°æŒ‰é’®åº•è‰² */
        padding: auto; /* å°æŒ‰é’®ä¸­æ–‡å­—åˆ°æŒ‰é’®è¾¹ç¼˜çš„è·ç¦» */
        border-radius: 50px; /* å°æŒ‰é’®åœ†è§’çš„å¼¯æ›²ç¨‹åº¦ï¼ˆåŠå¾„ï¼‰*/
        -moz-border-radius: 50px;
        -webkit-border-radius: 50px;
        font-weight: bold; /* å°æŒ‰é’®ä¸­æ–‡å­—çš„ç²—ç»† */
        text-decoration: none !important;
        box-shadow:0 1px 2px rgba(0,0,0,.15), 0 1px 0 #ffffff inset;
      }
      
      #backtop a:hover { /* å°æŒ‰é’®ä¸Šæœ‰é¼ æ ‡æ‚¬åœæ—¶ */
        background: rgba(64,120,192,0.8); /* å°æŒ‰é’®çš„åº•è‰² */
        color: #fff; /* æ–‡å­—é¢œè‰² */
      }
</style>
```

ç¬¬äºŒç§æ–¹å¼ä¼šè®©ä»£ç æ›´æ¸…æ™°ä¸€äº›ã€‚

åœ¨`_includes`æ–‡ä»¶å¤¹ä¸‹åˆ›å»º`top.html`

å†™å…¥ä¸Šé¢çš„ä¸¤æ®µä»£ç ï¼Œåœ¨`post.html`ä¸­ä»¥includeçš„æ–¹å¼è°ƒç”¨top.htmlå³å¯

> å¦‚æœéœ€è¦åœ¨æ‰€æœ‰é¡µé¢æ˜¾ç¤ºï¼Œåˆ™ç›´æ¥åœ¨`footer.html`ä¸­åŠ å…¥è¯¥è¡Œä»£ç å³å¯

## åšå®¢æœç´¢åŠŸèƒ½

è¿™é‡Œä½¿ç”¨äº†ç°æˆçš„Jeckyllæœç´¢ç»„ä»¶`Jeckyll-Search`ã€‚

[Githubé“¾æ¥](https://github.com/androiddevelop/jekyll-search)

å·²ç»å†™å¾—è›®æ¸…æ¥šè¯¥æ€ä¹ˆç”¨äº†ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼š

1. **`bootstrap3-typeahead.min.js` çš„å¼•å…¥å¿…é¡»åœ¨`jquery.min.js`å¼•å…¥ä¹‹åï¼Œå³åœ¨`footer.html`ä¸­çš„è¡Œæ•°æ›´é åï¼**
2. å¦‚æœè‡ªå·±æœ‰å¼•å…¥æ‰€éœ€ä¾èµ–æ—¶ï¼Œä¸è¦é‡å¤å¼•å…¥ä¾èµ–ï¼Œæœ€ç¨³å¦¥çš„åŠæ³•å°±æ˜¯æŠŠé‚£äº›`div`ä»€ä¹ˆä»€ä¹ˆçš„æ‰”åˆ°`footer.html`çš„æœ€åã€‚

## æ·»åŠ å³ä¸Šè§’å¯¼èˆªæ—¶é—´å½’æ¡£

å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/ds19991999/article/details/81293467

åœ¨`github.io`æ ¹ç›®å½•ä¸‹åˆ›å»ºçš„æ‰€æœ‰htmléƒ½ä¼šè¢«è§†ä½œæ˜¯å¯¼èˆªé¡µé¢ï¼Œåœ¨è¯¥é¡µé¢è®¾ç½®é¡µé¢`title\layout\description`ï¼Œå†è¾“å…¥å½’æ¡£é¡µå¸ƒå±€å³å¯ã€‚

> `layout`å³è¯¥é¡µé¢æ‰€ç”¨çš„é»˜è®¤æ¡†æ¶æ˜¯å“ªä¸ª`_layouts`æ–‡ä»¶å¤¹ä¸­çš„htmlæ–‡ä»¶

ä»¥ä¸‹ä¸º`Archives.html`çš„ä»£ç ï¼š

```html
---
permalink: /archives/
title: "TimeLine"
layout: default
description: 
header-img: ""
---

<!-- Page Header å¯ä»¥æ ¹æ®HUXçš„tags.htmlé¡µå†™-->

<!-- Main Content -->
<div class="container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <!--æ—¶é—´çº¿-->
            <ul>
            	<!--è¯¦è§https://blog.csdn.net/ds19991999/article/details/81293467-->
            </ul>
            <!--æ—¶é—´çº¿ç»“æŸ-->
		</div>
	</div>
</div>
```

## æ·»åŠ Github Starå¾½ç« 

æ·»åŠ åœ¨`footer.html`ä¸­ï¼š`"https://badgen.net/github/stars/(githubè´¦æˆ·å)/(Repositoryå)"`

## æ·»åŠ ç½‘ç«™åŠæ–‡ç« è®¿é—®äººæ•°

å‚è€ƒé“¾æ¥ï¼šhttp://ibruce.info/2015/04/04/busuanzi/#more

å°†ä¾èµ–å¼•å…¥`footer.html`ï¼Œç½‘ç«™è®¿å®¢ä»£ç å¼•å…¥`footer.html`ç¡®ä¿æ‰€æœ‰é¡µé¢éƒ½èƒ½æ˜¾ç¤ºï¼Œæ–‡ç« è®¿å®¢ä»£ç å¼•å…¥`post.html`è®°å½•æ–‡ç« é˜…è¯»æ¬¡æ•°ã€‚

```html
<!--æ€»è®¿å®¢ ä¸è’œå­ ç»„ä»¶å¼•å…¥-->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<!--ä¸è’œå­ æ–‡ç« è®¿é—®æ¬¡æ•°-->
<br>
<span class="meta" id="busuanzi_container_page_pv">
Viewed <span id="busuanzi_value_page_pv"></span> times
</span>
<!--ä¸è’œå­è®¿å®¢è®°å½•-->
<span id="busuanzi_container_site_pv">
ğŸ‘€<span id="busuanzi_value_site_pv"></span>times |
</span>
<span id="busuanzi_container_site_uv">
ğŸ‘£<span id="busuanzi_value_site_uv"></span>person-time
</span>
```

## æ·»åŠ gitalkè¯„è®ºæ¨¡å—

å‚è€ƒé“¾æ¥ï¼šhttps://www.jianshu.com/p/4242bb065550

gitalké“¾æ¥ï¼šhttps://github.com/gitalk/gitalk

* æ–°å»ºOAuth Application

  å‚è€ƒé“¾æ¥ä¸­æœ‰è¯¦ç»†æ­¥éª¤ï¼Œæƒ³è¦æŸ¥çœ‹è¯¥åº”ç”¨åªéœ€åœ¨githubé¡µé¢ä¾æ¬¡ç‚¹å‡»`Setting-Developer settings`å³å¯æŸ¥çœ‹è¯¥é¡¹ç›®ä»¥åŠé¡¹ç›®è´¦å·å’Œå¯†ç 

åœ¨`_includes`æ–‡ä»¶å¤¹ä¸­æ–°å»º`gitalk.html`

```html
<!-- å¼•å…¥ -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<!-- æ·»åŠ ä¸€ä¸ªå®¹å™¨-->
<div id="gitalk-container"></div>

<!-- ç”Ÿæˆ gitalk æ’ä»¶-->
<script>
    var gitalk = new Gitalk({
        clientID: 'è¿™é‡Œå¡«å…¥ä½ çš„é¡¹ç›®ID',
        clientSecret: 'è¿™é‡Œå¡«å…¥ä½ çš„é¡¹ç›®å¯†ç ',
        repo: 'Jia-py.github.io',
        owner: 'Jia-py',
        admin: ['Jia-py'],
        id: location.href, //å¯ä»¥ä¿®æ”¹ä¸ºid: decodeURI(location.pathname)
        distractionFreeMode: false,
        proxy: 'https://netnr-proxy.cloudno.de/https://github.com/login/oauth/access_token'
    })
    gitalk.render('gitalk-container')
</script>
```

åœ¨`post.html`ä¸­ä»¥includeçš„æ–¹å¼å¼•ç”¨`gitalk.html`å³å¯

> **åœ¨åˆå§‹åŒ–gitalkçš„è¿‡ç¨‹ä¸­å‡ºç°äº†403é”™è¯¯**ï¼Œå‘ç°æ˜¯gitalkè¯´å¤§å®¶ä½¿ç”¨æŸä¸€é“¾æ¥å¤ªå¤šæ¬¡è€Œå¤±æ•ˆäº†ï¼Œæœ€å¥½è‡ªå·±éƒ¨ç½²gitalké…ç½®ä¸­çš„proxyã€‚è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ä»issuesé‡Œé¢æŠ„çš„ä¸€æ®µç½‘å‹çš„ä»£ç ã€‚
>
> **æŠ¥é”™Errorï¼šValidation Failed**ï¼Œå‚è€ƒhttps://github.com/gitalk/gitalk/issues/102
>
> é‡åˆ°å…¶ä»–é—®é¢˜åˆ™å¯ä»¥å»[gitalk](https://github.com/gitalk/gitalk)çš„issuesæ¿å—æŸ¥æ‰¾ç›¸åº”é—®é¢˜ã€‚
>
> 